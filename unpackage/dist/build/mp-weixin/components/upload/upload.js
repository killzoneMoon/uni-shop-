(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/upload/upload"],{"3ef0":function(n,t,e){"use strict";e.r(t);var u=e("85d8"),a=e.n(u);for(var r in u)"default"!==r&&function(n){e.d(t,n,(function(){return u[n]}))}(r);t["default"]=a.a},"4fc8":function(n,t,e){"use strict";var u=e("f201"),a=e.n(u);a.a},"849e":function(n,t,e){"use strict";e.r(t);var u=e("ce75"),a=e("3ef0");for(var r in a)"default"!==r&&function(n){e.d(t,n,(function(){return a[n]}))}(r);e("4fc8");var o,i=e("f0c5"),c=Object(i["a"])(a["default"],u["b"],u["c"],!1,null,"2ddd13a0",null,!1,u["a"],o);t["default"]=c.exports},"85d8":function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,a=r(e("a34a"));e("26cb"),r(e("443e"));function r(n){return n&&n.__esModule?n:{default:n}}function o(n,t,e,u,a,r,o){try{var i=n[r](o),c=i.value}catch(s){return void e(s)}i.done?t(c):Promise.resolve(c).then(u,a)}function i(n){return function(){var t=this,e=arguments;return new Promise((function(u,a){var r=n.apply(t,e);function i(n){o(r,u,a,i,c,"next",n)}function c(n){o(r,u,a,i,c,"throw",n)}i(void 0)}))}}var c={name:"upload",computed:{_initThis:function(){return u=this,""}},data:function(){return{userObj:{},formData:{},upFileName:"",action:"",loading:!1}},methods:{beforeUpload:function(n,t){var e=this;return i(a.default.mark((function n(){var r,o,i,c;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return u.loading=!0,r=t[0].file.path,o=r.split("."),i=o[o.length-1],u.upFileName=u.$u.guid(20)+"."+i,n.next=7,e.$u.get("/api/auth/oss/token").then((function(n){}),(function(n){c=n,u.formData={key:u.upFileName,policy:c.policy,OSSAccessKeyId:c.accessid,success_action_status:"200",signature:c.signature},u.action=c.host}));case 7:case"end":return n.stop()}}),n)})))()},uploadSuccess:function(){var n=this;return i(a.default.mark((function t(){var e;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={avatar:u.upFileName},t.next=3,n.$u.patch("/api/user/avatar",e).then((function(n){}),(function(n){}));case 3:return t.next=5,n.$u.get("/api/user").then((function(n){}),(function(n){u.userObj=n,u.$bus.userObj=n,u.$u.toast("更新成功"),u.$refs.upload.remove(0),u.$refs.upload.upload(),u.loading=!1}));case 5:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){this.userObj=this.$bus.userObj}};t.default=c},ce75:function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return u}));var u={uUpload:function(){return e.e("components/u-upload/u-upload").then(e.bind(null,"5306"))},uAvatar:function(){return e.e("components/u-avatar/u-avatar").then(e.bind(null,"ecc0"))},uLoading:function(){return e.e("components/u-loading/u-loading").then(e.bind(null,"d431"))}},a=function(){var n=this,t=n.$createElement;n._self._c},r=[]},f201:function(n,t,e){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/upload/upload-create-component',
    {
        'components/upload/upload-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("849e"))
        })
    },
    [['components/upload/upload-create-component']]
]);

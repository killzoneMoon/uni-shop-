(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/bottom-cart/bottom-cart"],{"121d":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=u(e("a34a"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,n,e,o,u,c,r){try{var i=t[c](r),a=i.value}catch(s){return void e(s)}i.done?n(a):Promise.resolve(a).then(o,u)}function r(t){return function(){var n=this,e=arguments;return new Promise((function(o,u){var r=t.apply(n,e);function i(t){c(r,o,u,i,a,"next",t)}function a(t){c(r,o,u,i,a,"throw",t)}i(void 0)}))}}var i={name:"bottom-cart",data:function(){return{src:e("9cd0"),src_:e("7a5f"),collectIcon:!1,cartCount:0,loading:!0,reqLoading:!1}},props:{item:{default:function(){return{query:{}}}},isCollect:{default:!1,type:Boolean}},mounted:function(){(this.$bus.userObj||this.$store.state.userObj.id)&&this.$nextTick((function(){setTimeout(this._initData,500)}))},methods:{toCart:function(){this.$u.route({type:"switchTab",url:"pages/cart/cart"})},collect:function(){var n=this;return r(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.$bus.userObj||n.$store.state.userObj.id){e.next=3;break}return t.showToast({title:"请先登录",icon:"none"}),e.abrupt("return");case 3:return n.switchCollectIcon(),n.collectIcon?n.$u.toast("收藏成功"):n.$u.toast("取消收藏"),n.$store.state.loginInfo,e.next=8,n.$u.post("/api/collects/goods/".concat(n.$bus.bookInfo.goods.id)).then((function(t){}),(function(t){n.$u.get("/api/collects").then((function(t){}),(function(t){n.$bus.collections=t}))}));case 8:case"end":return e.stop()}}),e)})))()},addCart:function(){var n=this;return r(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.$bus.userObj){e.next=3;break}return t.showToast({title:"请先登录",icon:"none"}),e.abrupt("return");case 3:return n.reqLoading=!0,e.next=6,n.$u.post("/api/carts",{goods_id:n.$bus.bookInfo.goods.id}).then((function(t){}),function(){var t=r(o.default.mark((function t(e){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.$u.put("/api/carts/".concat(n.$bus.cartInfo.data.id),{num:1}).then((function(t){}),function(){var t=r(o.default.mark((function t(e){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.$u.get("api/carts",{include:"goods"}).then((function(t){}),function(){var t=r(o.default.mark((function t(e){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.$bus.cartInfo=e,!e){t.next=5;break}return t.next=4,n._initData();case 4:n.$u.toast("已加入购物车");case 5:n.reqLoading=!1;case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))()},switchCollectIcon:function(){this.collectIcon=!this.collectIcon},_initData:function(){var t=this;this.loading=!1;this.item;setTimeout((function(){t.collectIcon=t.isCollect}),200),this.$u.utils.isLogin()&&(this.cartCount=this.$bus.cartInfo.data.length)}}};n.default=i}).call(this,e("543d")["default"])},"1f33":function(t,n,e){"use strict";e.r(n);var o=e("93d3"),u=e("cab1");for(var c in u)"default"!==c&&function(t){e.d(n,t,(function(){return u[t]}))}(c);e("4b16");var r,i=e("f0c5"),a=Object(i["a"])(u["default"],o["b"],o["c"],!1,null,"5de8bbac",null,!1,o["a"],r);n["default"]=a.exports},"4b16":function(t,n,e){"use strict";var o=e("c968"),u=e.n(o);u.a},"93d3":function(t,n,e){"use strict";e.d(n,"b",(function(){return u})),e.d(n,"c",(function(){return c})),e.d(n,"a",(function(){return o}));var o={uIcon:function(){return e.e("components/u-icon/u-icon").then(e.bind(null,"ce91"))},uSkeleton:function(){return e.e("components/u-skeleton/u-skeleton").then(e.bind(null,"1f65"))},uLoading:function(){return e.e("components/u-loading/u-loading").then(e.bind(null,"d431"))}},u=function(){var t=this,n=t.$createElement;t._self._c},c=[]},c968:function(t,n,e){},cab1:function(t,n,e){"use strict";e.r(n);var o=e("121d"),u=e.n(o);for(var c in o)"default"!==c&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=u.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/bottom-cart/bottom-cart-create-component',
    {
        'components/bottom-cart/bottom-cart-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("1f33"))
        })
    },
    [['components/bottom-cart/bottom-cart-create-component']]
]);

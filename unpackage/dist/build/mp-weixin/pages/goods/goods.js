(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods"],{"0d25":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var r={uSearch:function(){return n.e("components/u-search/u-search").then(n.bind(null,"1259"))},uEmpty:function(){return n.e("components/u-empty/u-empty").then(n.bind(null,"6e61"))},uLoadmore:function(){return n.e("components/u-loadmore/u-loadmore").then(n.bind(null,"668d"))}},o=function(){var e=this,t=e.$createElement;e._self._c},a=[]},"22b5":function(e,t,n){"use strict";(function(e){n("6f4b");r(n("66fd"));var t=r(n("ad18"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"728e":function(e,t,n){},"8ba8":function(e,t,n){"use strict";var r=n("728e"),o=n.n(r);o.a},a5e6:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("a34a"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var u=e.apply(t,n);function i(e){a(u,r,o,i,c,"next",e)}function c(e){a(u,r,o,i,c,"throw",e)}i(void 0)}))}}var i={data:function(){return{refresherTriggered:!1,tabbar:[],scrollTop:0,current:0,currentTab:"0-0",menuHeight:0,menuItemHeight:0,keyword:"",page:1,recommend:0,sales:0,price:0,comments_count:0,loading:"loadmore",currentCategory:"区块链",showEmpty:!1,showLoadmore:!0}},beforeMount:function(){this.$nextTick((function(){this._initGoods({title:this.currentCategory})}))},methods:{changeRefresherTrigger:function(){this.refresherTriggered=!0,this.$nextTick((function(){this.refresherTriggered=!1}))},bottomRefresh:function(){var e=this;return u(r.default.mark((function t(){var n,o,a,u,i,c,s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.showLoadmore){t.next=2;break}return t.abrupt("return");case 2:if(e.tabbar[e.current].foods.length%10===0){t.next=5;break}return e.loading="nomore",t.abrupt("return");case 5:if(n=e.sales,o=e.price,a=e.comments_count,u=e.keyword,i=e._initGoods,c=e.currentCategory,s=e.currentTab,e.loading="loading",!(e.page<=5)){t.next=11;break}e.page++,t.next=13;break;case 11:return e.loading="nomore",t.abrupt("return");case 13:return e.params={title:"-1-0"===s?u:c,page:e.page,sales:n,price:o,comments_count:a},t.next=16,i(e.params);case 16:e.loading="loadmore";case 17:case"end":return t.stop()}}),t)})))()},clearSearch:function(){this.params={title:"",page:1},this._initGoods(this.params)},searchItem:function(){this.tabbar[this.current].foods=[],"-1-0"!==this.currentTab&&(this.currentTab="-1-0"),this.params={title:this.keyword},this._initGoods(this.params)},toUrl:function(e){this.$u.route({url:e})},_initGoods:function(){var e=arguments,t=this;return u(r.default.mark((function n(){var o,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.length>0&&void 0!==e[0]?e[0]:{},n.next=3,t.$u.get("/api/goods",o).then((function(e){}),(function(e){a=e,a.goods.data.length?t.showLoadmore=!0:t.showLoadmore=!1}));case 3:0===t.tabbar.length&&a.categories.forEach((function(e){e.foods=[],t.tabbar.push(e)})),1===t.page&&(t.tabbar[t.current].foods=[]),a.goods.data.forEach((function(e){t.tabbar[t.current].foods.push(e)})),a.goods.data.length?t.showEmpty&&(t.showEmpty=!1):(t.showEmpty||(t.showEmpty=!0),t.tabbar[t.current].foods=[],a.recommend_goods.forEach((function(e){t.tabbar[t.current].foods.push(e)}))),t.current--,t.current++;case 9:case"end":return n.stop()}}),n)})))()},getImg:function(){return Math.floor(35*Math.random())},swichMenu:function(e,t){var n=this;return u(r.default.mark((function o(){var a,u,i;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e!=n.currentTab){r.next=2;break}return r.abrupt("return");case 2:if(1!==n.page&&(n.page=1),"loadmore"!==n.loading&&(n.loading="loadmore"),n.currentTab=e,n.current=t,0!=n.menuHeight&&0!=n.menuItemHeight){r.next=11;break}return r.next=9,n.getElRect("menu-scroll-view","menuHeight");case 9:return r.next=11,n.getElRect("u-tab-item","menuItemHeight");case 11:n.scrollTop=e*n.menuItemHeight+n.menuItemHeight/2-n.menuHeight/2,a=parseInt(e.split("-")[0]),u=parseInt(e.split("-")[1]),i={title:n.tabbar[a].children[u].name,page:n.page},n.currentCategory=i.title,n._initGoods(i);case 17:case"end":return r.stop()}}),o)})))()},getElRect:function(t,n){var r=this;new Promise((function(o,a){var u=e.createSelectorQuery().in(r);u.select("."+t).fields({size:!0},(function(e){e?r[n]=e.height:setTimeout((function(){r.getElRect(t)}),10)})).exec()}))}}};t.default=i}).call(this,n("543d")["default"])},ad18:function(e,t,n){"use strict";n.r(t);var r=n("0d25"),o=n("f11e");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("8ba8");var u,i=n("f0c5"),c=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,"174818d6",null,!1,r["a"],u);t["default"]=c.exports},f11e:function(e,t,n){"use strict";n.r(t);var r=n("a5e6"),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a}},[["22b5","common/runtime","common/vendor"]]]);
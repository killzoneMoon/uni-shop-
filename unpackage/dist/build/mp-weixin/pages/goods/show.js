(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/show"],{3752:function(t,n,e){"use strict";e.d(n,"b",(function(){return r})),e.d(n,"c",(function(){return u})),e.d(n,"a",(function(){return o}));var o={goodsCard:function(){return e.e("components/goods-card/goods-card").then(e.bind(null,"6397"))},uTabs:function(){return e.e("components/u-tabs/u-tabs").then(e.bind(null,"4b4f"))},uParse:function(){return Promise.all([e.e("common/vendor"),e.e("components/u-parse/u-parse")]).then(e.bind(null,"4d8c"))},bottomCart:function(){return Promise.all([e.e("common/vendor"),e.e("components/bottom-cart/bottom-cart")]).then(e.bind(null,"1f33"))}},r=function(){var t=this,n=t.$createElement;t._self._c},u=[]},"3fb8":function(t,n,e){"use strict";e.r(n);var o=e("3752"),r=e("e681");for(var u in r)"default"!==u&&function(t){e.d(n,t,(function(){return r[t]}))}(u);e("e5ae");var a,c=e("f0c5"),i=Object(c["a"])(r["default"],o["b"],o["c"],!1,null,"3dcf670f",null,!1,o["a"],a);n["default"]=i.exports},c161:function(t,n,e){"use strict";(function(t){e("6f4b");o(e("66fd"));var n=o(e("3fb8"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},c4d6:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("a34a"));e("26cb");function r(t){return t&&t.__esModule?t:{default:t}}function u(t,n,e,o,r,u,a){try{var c=t[u](a),i=c.value}catch(s){return void e(s)}c.done?n(i):Promise.resolve(i).then(o,r)}function a(t){return function(){var n=this,e=arguments;return new Promise((function(o,r){var a=t.apply(n,e);function c(t){u(a,o,r,c,i,"next",t)}function i(t){u(a,o,r,c,i,"throw",t)}c(void 0)}))}}var c={data:function(){return{tabs:[{name:"商品详情"},{name:"商品评论",count:0},{name:"推荐商品"}],commentList:[],currentTab:0,bookInfo:{},bookDetails:{},cartInfo:{},flag:!1,page:1}},beforeMount:function(){var t=this;return a(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.$bus.userObj&&!t.$store.state.userObj.id){n.next=6;break}return n.next=3,t._initCollections();case 3:t._initCart(),n.next=7;break;case 6:t.cartInfo.data=[];case 7:case"end":return n.stop()}}),n)})))()},onLoad:function(t){this._initBookDetails(t.id),this.id=t.id,this.page=t.page||1},computed:{},methods:{_initCollections:function(){var t=this;return a(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$u.get("/api/collects",{page:t.page}).then((function(t){}),(function(n){n.data.forEach((function(n){t.flag||n.goods_id===Number(t.id)&&(t.flag=!0)}))}));case 2:case"end":return n.stop()}}),n)})))()},toUrl:function(t){this.$u.route({type:"redirectTo",url:t})},_initBookDetails:function(t){var n=this;return a(o.default.mark((function e(){var r;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$u.get("/api/goods/".concat(t)).then((function(t){}),(function(t){n.bookDetails=t,n.$bus.bookInfo=t}));case 2:n.bookInfo=n.bookDetails,r=n.bookInfo.goods,r.comments.forEach((function(t){var e={name:t.user.name,contentText:t.content,url:t.user.avatar_url,id:t.user_id,date:t.created_at};n.commentList.push(e)})),n.tabs[1].count=r.comments.length;case 6:case"end":return e.stop()}}),e)})))()},sortChange:function(t){this.currentTab=Number(t),this.toCategory(t)},toCategory:function(t){this.$u.route({url:"pages/index/index"})},_initCart:function(){var t=this;return a(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$u.get("/api/carts",{include:"goods"}).then((function(t){}),(function(n){t.cartInfo=n,t.$bus.cartInfo=n}));case 2:case"end":return n.stop()}}),n)})))()}}};n.default=c},e5ae:function(t,n,e){"use strict";var o=e("ed53"),r=e.n(o);r.a},e681:function(t,n,e){"use strict";e.r(n);var o=e("c4d6"),r=e.n(o);for(var u in o)"default"!==u&&function(t){e.d(n,t,(function(){return o[t]}))}(u);n["default"]=r.a},ed53:function(t,n,e){}},[["c161","common/runtime","common/vendor"]]]);
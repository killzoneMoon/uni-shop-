(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orders/base-address"],{"019c":function(e,t,n){"use strict";n.r(t);var i=n("05aa"),r=n.n(i);for(var u in i)"default"!==u&&function(e){n.d(t,e,(function(){return i[e]}))}(u);t["default"]=r.a},"05aa":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("a34a")),r=a(n("19ea")),u=a(n("5d0b")),s=a(n("cdc4"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i,r,u,s){try{var a=e[u](s),o=a.value}catch(c){return void n(c)}a.done?t(o):Promise.resolve(o).then(i,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var u=e.apply(t,n);function s(e){o(u,i,r,s,a,"next",e)}function a(e){o(u,i,r,s,a,"throw",e)}s(void 0)}))}}var d={name:"baseAddress",data:function(){return{p:"",c:"",a:"",cityValue:"",isChooseP:!1,province:0,provinces:r.default,isChooseC:!1,city:0,citys:u.default[0],isChooseA:!1,area:0,areas:s.default[0][0],tabsIndex:0,height:30,bgColor:this.$u.color.bgColor,marginTop:30,marginBottom:30,value:!1,input:"",form:{name:"",phone:"",address:"",locationStr:""},rules:{name:[{required:!0,whitespace:!0,message:"请输入姓名",trigger:["change","blur"]}],phone:[{required:!0,pattern:/^1{1}[3-9]{1}[0-9]{9}$/gi,whitespace:!0,message:"请务必输入正确格式的手机号",trigger:["change","blur"]}],address:[{required:!0,message:"详细地址是必须的",trigger:["change","blur"]}]},showDefaultButton:!0,is_default:!0,id:0,addressDetail:{}}},onReady:function(){this.$refs.uForm.setRules(this.rules)},onLoad:function(e){e.id&&this._initAddressDetail(e.id)},methods:{provinceChange:function(e){this.isChooseP=!0,this.isChooseC=!1,this.isChooseA=!1,this.province=e,this.citys=u.default[e],this.tabsIndex=1,this.p=this.provinces[e].label},cityChange:function(e){this.isChooseC=!0,this.isChooseA=!1,this.city=e,this.areas=s.default[this.province][e],this.tabsIndex=2,this.c=this.citys[e].label},areaChange:function(e){this.a=this.areas[e].label,this.form.locationStr=this.p+"-"+this.c+"-"+this.a,this.value=!1},openActionSheet:function(){this.value=!0},closeActionSheet:function(){this.value=!1},_initAddressDetail:function(e){var t=this;return c(i.default.mark((function n(){var r;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$u.get("/api/address/".concat(e)).then((function(e){}),(function(e){r=e}));case 2:t.addressDetail=r,t.form.phone=r.phone,t.form.locationStr=r.province+"-"+r.city+"-"+r.county,t.is_default=!!r.is_default,t.form.name=r.name,t.form.address=r.address,t.p=r.province,t.c=r.city,t.a=r.county,t.is_default&&(t.showDefaultButton=!1);case 12:case"end":return n.stop()}}),n)})))()},alterAddress:function(t){var n=this;return c(i.default.mark((function r(){return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,n.$u.put("/api/address/".concat(n.addressDetail.id),t).then((function(e){}),(function(e){}));case 2:e.showToast({title:"修改成功",icon:"none"}),n._initAddresses();case 4:case"end":return i.stop()}}),r)})))()},addNewAddress:function(){var t=this;return c(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$refs.uForm.validate(function(){var n=c(i.default.mark((function n(r){var u,s,a,o,c,d,l,f;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r){n.next=14;break}if(u=t.form,s=u.phone,a=u.address,o=u.name,t.is_default,c=t.p,d=t.c,l=t.a,f={phone:s,county:l,city:d,province:c,name:o,address:a},t.is_default&&(f.is_default=1),!t.addressDetail.id){n.next=7;break}return t.alterAddress(f),n.abrupt("return");case 7:return n.next=9,t.$u.post("/api/address",f).then((function(e){}),(function(e){}));case 9:e.showToast({title:"添加成功",icon:"none"}),t._initAddresses(),t.$u._initPreview(),n.next=15;break;case 14:e.showToast({title:"验证失败",icon:"none"});case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})))()},changeDefault:function(){this.is_default?this.is_default=!0:this.is_default=!1},_initAddresses:function(){var e=this;return c(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$u.get("/api/address").then((function(e){}),(function(t){e.$bus.addresses=t}));case 2:case"end":return t.stop()}}),t)})))()}}};t.default=d}).call(this,n("543d")["default"])},"33e1":function(e,t,n){"use strict";n.r(t);var i=n("3a12"),r=n("019c");for(var u in r)"default"!==u&&function(e){n.d(t,e,(function(){return r[e]}))}(u);n("7ad5");var s,a=n("f0c5"),o=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,"aadaf90e",null,!1,i["a"],s);t["default"]=o.exports},3928:function(e,t,n){},"3a12":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return i}));var i={uForm:function(){return n.e("components/u-form/u-form").then(n.bind(null,"5090"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("components/u-form-item/u-form-item")]).then(n.bind(null,"7025"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("components/u-input/u-input")]).then(n.bind(null,"de00"))},uIcon:function(){return n.e("components/u-icon/u-icon").then(n.bind(null,"ce91"))},uSwitch:function(){return n.e("components/u-switch/u-switch").then(n.bind(null,"9269"))},uCellGroup:function(){return n.e("components/u-cell-group/u-cell-group").then(n.bind(null,"add2"))},uCellItem:function(){return n.e("components/u-cell-item/u-cell-item").then(n.bind(null,"def7"))},uButton:function(){return n.e("components/u-button/u-button").then(n.bind(null,"b2a4"))}},r=function(){var e=this,t=e.$createElement;e._self._c},u=[]},"7ad5":function(e,t,n){"use strict";var i=n("3928"),r=n.n(i);r.a},"866b":function(e,t,n){"use strict";(function(e){n("6f4b");i(n("66fd"));var t=i(n("33e1"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["866b","common/runtime","common/vendor"]]]);
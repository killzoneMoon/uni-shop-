(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/collection/collection"],{"5d9b":function(t,n,e){"use strict";(function(t){e("6f4b");o(e("66fd"));var n=o(e("b9e3"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},b9e3:function(t,n,e){"use strict";e.r(n);var o=e("fb32"),c=e("cb62");for(var i in c)"default"!==i&&function(t){e.d(n,t,(function(){return c[t]}))}(i);e("bd0d");var u,l=e("f0c5"),r=Object(l["a"])(c["default"],o["b"],o["c"],!1,null,"4e321923",null,!1,o["a"],u);n["default"]=r.exports},bd0d:function(t,n,e){"use strict";var o=e("e9d2"),c=e.n(o);c.a},cb62:function(t,n,e){"use strict";e.r(n);var o=e("da3b"),c=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=c.a},da3b:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("a34a"));function c(t){return t&&t.__esModule?t:{default:t}}function i(t,n,e,o,c,i,u){try{var l=t[i](u),r=l.value}catch(a){return void e(a)}l.done?n(r):Promise.resolve(r).then(o,c)}function u(t){return function(){var n=this,e=arguments;return new Promise((function(o,c){var u=t.apply(n,e);function l(t){i(u,o,c,l,r,"next",t)}function r(t){i(u,o,c,l,r,"throw",t)}l(void 0)}))}}var l={name:"collection",beforeMount:function(){this._initCollections()},onReachBottom:function(){this.collections.meta.pagination.total-this.collects.length>0&&(this.page++,this._initCollections())},onShow:function(){this.$bus.collections&&(this.collections=this.$bus.collections,this.collects=this.collections.data)},data:function(){return{collections:{},collects:[],page:1}},methods:{toUrl:function(t){this.$u.route({url:t})},_initCollections:function(){var t=this;return u(o.default.mark((function n(){var e;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e={page:t.page},n.next=3,t.$u.get("/api/collects",e).then((function(t){}),(function(n){t.$bus.collections=n,t.collections=n}));case 3:1===t.page&&(t.collects=[]),t.collections.data.forEach((function(n){n.current_page=t.collections.meta.pagination.current_page,t.collects.push(n)}));case 5:case"end":return n.stop()}}),n)})))()},removeCollection:function(n){var e=this;return u(o.default.mark((function c(){return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,e.$u.post("/api/collects/goods/".concat(n),{}).then((function(t){}),(function(t){e.collects.forEach((function(t){t.goods.id===n&&(e.collects.splice(e.collects.indexOf(t),1),e.$bus.collections.data.splice(e.collects.indexOf(t),1))}))}));case 2:t.showToast({title:"已取消收藏",icon:"none"});case 3:case"end":return o.stop()}}),c)})))()}}};n.default=l}).call(this,e("543d")["default"])},e9d2:function(t,n,e){},fb32:function(t,n,e){"use strict";e.d(n,"b",(function(){return c})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}));var o={uEmpty:function(){return e.e("components/u-empty/u-empty").then(e.bind(null,"6e61"))},goodsCard:function(){return e.e("components/goods-card/goods-card").then(e.bind(null,"6397"))}},c=function(){var t=this,n=t.$createElement;t._self._c},i=[]}},[["5d9b","common/runtime","common/vendor"]]]);